<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Contacto · Mi sitio</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="styles.css" rel="stylesheet">
</head>

<body>

  <header class="bg-white border-bottom sticky-top">
    <div class="container py-3 d-flex justify-content-between align-items-center">
      <h1 class="h4 m-0">DINAMARCA</h1>
      <nav class="d-flex gap-3">
        <a href="index.html">Inicio</a>
        <a href="about.html">Acerca</a>
        <a href="contact.html">Contacto</a>
      </nav>
    </div>
  </header>
<div id="galeriaAbout" class="carousel slide mb-4" data-bs-ride="carousel">

        <div class="carousel-inner rounded-3 overflow-hidden">
          <div class="carousel-item active">
            <!-- Puedes usar tu imagen local -->
            <img src="https://images.unsplash.com/photo-1551651767-d5ffbdd04b83?q=80&w=2232&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="d-block w-100" alt="DENMARK 1">
          </div>

          <div class="carousel-item">
            <!-- Placeholder online para que no falle si no tienes más archivos -->
            <img src="https://images.unsplash.com/photo-1559070226-d4cad642bede?q=80&w=1287&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="d-block w-100" alt="DENMARK 2">
          </div>

          <div class="carousel-item">
            <img src="https://images.unsplash.com/photo-1577346895253-445f05a6670d?q=80&w=2340&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="d-block w-100" alt="DENMARK 3">
          </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#galeriaAbout" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Anterior</span>
        </button>

        <button class="carousel-control-next" type="button" data-bs-target="#galeriaAbout" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Siguiente</span>
        </button>

      </div>
  <main class="container py-5">
    <section class="bg-white p-4 rounded-4 shadow-sm">
      <h2 class="h5 mb-3">Contacto</h2>
      <p class="text-muted mb-4">Agenda una reunión para planear tu próximo viaje a Dinamarca.</p>

      <form id="contactForm" class="row g-3">
        <div class="col-12 col-md-6">
          <label class="form-label">Nombre</label>
          <input class="form-control" type="text" name="nombre" required>
        </div>

        <div class="col-12 col-md-6">
          <label class="form-label">Email</label>
          <input class="form-control" type="email" name="email" required>
        </div>

        <div class="col-12">
          <label class="form-label">Día Preferencial</label>
          <select class="form-select" name="diaPreferido" required>
            <option value="Lunes">Lunes</option>
            <option value="Martes">Martes</option>
            <option value="Miércoles">Miércoles</option>
            <option value="Jueves">Jueves</option>
            <option value="Viernes">Viernes</option>
          </select>
        </div>
        
        <div class="col-12">
          <label class="form-label">Mensaje</label>
          <textarea class="form-control" name="mensaje" rows="4" required></textarea>
        </div>

        <div class="col-12 d-flex gap-2">
          <button id="submitBtn" class="btn btn-danger" type="submit">Enviar mensaje</button>
          <button class="btn btn-outline-secondary" type="reset">Limpiar</button>
        </div>
      </form>

      <div id="status" class="mt-3"></div>
    </section>
  </main>

  <footer class="bg-white border-top">
    <div class="container py-3 text-center text-muted">
      <small>© 2026 · Mi sitio</small>
    </div>
  </footer>

  <!-- Firebase + Realtime Database -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
    import { getDatabase, ref, push, set, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

    // Tu configuración (Realtime Database usa databaseURL)
    const firebaseConfig = {
    apiKey: "AIzaSyAQM04Js4yBix94z6oCOfa8sZ84WCrDTUY",
    authDomain: "webstudio-ce0dc.firebaseapp.com",
    projectId: "webstudio-ce0dc",
    storageBucket: "webstudio-ce0dc.firebasestorage.app",
    messagingSenderId: "1078506531688",
    appId: "1:1078506531688:web:7378ec65889b294a4b44dd"
  };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const form = document.getElementById("contactForm");
    const statusDiv = document.getElementById("status");
    const submitBtn = document.getElementById("submitBtn");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const data = {
        nombre: form.nombre.value.trim(),
        email: form.email.value.trim(),
        mensaje: form.mensaje.value.trim(),
        diaPreferido: form.diaPreferido.value.trim(),
        createdAt: serverTimestamp(),
        page: location.href
      };

      if (!data.nombre || !data.email || !data.mensaje) {
        statusDiv.innerHTML = `<div class="alert alert-warning">Completa todos los campos.</div>`;
        return;
      }

      statusDiv.innerHTML = `<div class="alert alert-info">Enviando...</div>`;
      submitBtn.disabled = true;

      try {
        // Crea un nuevo registro en /contactos con un id único
        const newRef = push(ref(db, "contactos"));
        await set(newRef, data);

        statusDiv.innerHTML = `<div class="alert alert-success">✅ Mensaje enviado.</div>`;
        form.reset();
      } catch (err) {
        console.error(err);
        statusDiv.innerHTML = `
          <div class="alert alert-danger">
            ❌ Error: <strong>${err?.code || "sin código"}</strong><br>
            ${err?.message || "sin mensaje"}
          </div>`;
      } finally {
        submitBtn.disabled = false;
      }
    });
  </script>

</body>
</html>